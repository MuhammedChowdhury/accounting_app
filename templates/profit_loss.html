<!DOCTYPE html>
<html lang="en">
<head>
    <title>Profit and Loss Statement</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; }
        h1, h2, h3 { color: #333; }
        table { border-collapse: collapse; width: 100%; background-color: white; }
        th, td { padding: 10px; border: 1px solid black; text-align: left; }
    </style>
</head>
<body>
    <h1>Profit and Loss Statement</h1>
    <h2>Company: {{ company_details.name }} (ABN: {{ company_details.abn }})</h2>
    <p>Address: {{ company_details.address }}</p>
    <h3>Reporting Period: {{ company_details.period.from }} to {{ company_details.period.to }}</h3>

    <h4>Income</h4>
    <table>
        <tr><th>Description</th><th>Amount</th></tr>
        {% for record in income_records %}
        <tr>
            <td>{{ record.description }}</td>
            <td>${{ "{:,.2f}".format(record.amount) }}</td>
        </tr>
        {% endfor %}
    </table>
    <p><strong>Total Income:</strong> ${{ "{:,.2f}".format(total_income) }}</p>

    <h4>Cost of Goods Sold (COGS)</h4>
    <table>
        <tr><th>Description</th><th>Amount</th></tr>
        {% for record in cogs_records %}
        <tr>
            <td>{{ record.description }}</td>
            <td>${{ "{:,.2f}".format(record.amount) }}</td>
        </tr>
        {% endfor %}
    </table>
    <p><strong>Total COGS:</strong> ${{ "{:,.2f}".format(total_cogs) }}</p>

    <h4>Expenses</h4>
    <table>
        <tr><th>Description</th><th>Amount</th></tr>
        {% for record in expense_records %}
        <tr>
            <td>{{ record.description }}</td>
            <td>${{ "{:,.2f}".format(record.amount) }}</td>
        </tr>
        {% endfor %}
    </table>
    <p><strong>Total Expenses:</strong> ${{ "{:,.2f}".format(total_expenses) }}</p>

    <h4>Profit Calculations</h4>
    <p><strong>Gross Profit:</strong> ${{ "{:,.2f}".format(gross_profit) }}</p>
    <p><strong>Operating Profit:</strong> ${{ "{:,.2f}".format(operating_profit) }}</p>
    <p><strong>Tax:</strong> ${{ "{:,.2f}".format(tax) }}</p>
    <p><strong>Net Profit After Tax:</strong> ${{ "{:,.2f}".format(net_profit_after_tax) }}</p>
</body>
</html>
